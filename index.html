<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoodConnect - Share & Care</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Poppins', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #FF9933 0%, #138808 100%);
        }
        
        .food-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .food-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #FF9933, #FF6B35);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 153, 51, 0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(45deg, #138808, #28a745);
            transition: all 0.3s ease;
        }
        
        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(19, 136, 8, 0.3);
        }
        
        .hidden {
            display: none !important;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            transition: all 0.3s ease;
        }
        
        .food-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="gradient-bg text-white p-4 shadow-lg">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fas fa-utensils text-2xl"></i>
                <h1 class="text-2xl font-bold">Excess2Need</h1>
            </div>
                <button id="homeBtn" class="bg-white px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors">
                <i class="fas fa-home mr-2 text-green-700"></i>
                <span class="text-green-700">Home</span>
                </button>


        </div>
    </nav>

    <!-- Homepage -->
    <div id="homepage" class="min-h-screen">
        <!-- Hero Section -->
        <div class="gradient-bg text-white py-20">
            <div class="container mx-auto text-center px-4">
                <div class="mb-8">
                    <i class="fas fa-heart text-6xl mb-4 animate-pulse"></i>
                    <h2 class="text-5xl font-bold mb-4">Welcome to FoodConnect Excess2Need</h2>
                    <p class="text-xl mb-8">Connecting hearts through food - Share excess food, feed those in need</p>
                </div>
                
                <div class="flex flex-col md:flex-row justify-center space-y-4 md:space-y-0 md:space-x-8">
                    <button id="shareBtn" class="btn-primary text-white px-8 py-4 rounded-full text-lg font-semibold flex items-center justify-center space-x-3 min-w-64">
                        <i class="fas fa-share-alt text-2xl"></i>
                        <span>Share Food (Donate)</span>
                    </button>
                    <button id="buyBtn" class="btn-secondary text-white px-8 py-4 rounded-full text-lg font-semibold flex items-center justify-center space-x-3 min-w-64">
                        <i class="fas fa-shopping-cart text-2xl"></i>
                        <span>Buy Food (Need)</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Features Section -->
        <div class="py-16 bg-white">
            <div class="container mx-auto px-4">
                <h3 class="text-3xl font-bold text-center mb-12 text-gray-800">How It Works</h3>
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="text-center p-6">
                        <div class="bg-orange-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-plus text-orange-500 text-2xl"></i>
                        </div>
                        <h4 class="text-xl font-semibold mb-2">Share Excess Food</h4>
                        <p class="text-gray-600">Post your surplus homemade Indian dishes and help reduce food waste</p>
                    </div>
                    <div class="text-center p-6">
                        <div class="bg-green-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-search text-green-500 text-2xl"></i>
                        </div>
                        <h4 class="text-xl font-semibold mb-2">Find Nearby Food</h4>
                        <p class="text-gray-600">Browse available homemade meals in your area</p>
                    </div>
                    <div class="text-center p-6">
                        <div class="bg-blue-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-handshake text-blue-500 text-2xl"></i>
                        </div>
                        <h4 class="text-xl font-semibold mb-2">Connect & Care</h4>
                        <p class="text-gray-600">Build community connections while sharing delicious food</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Donor Registration -->
    <div id="donorRegister" class="hidden min-h-screen py-12">
        <div class="container mx-auto px-4">
            <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-8 fade-in">
                <div class="text-center mb-8">
                    <i class="fas fa-user-plus text-4xl text-orange-500 mb-4"></i>
                    <h2 class="text-3xl font-bold text-gray-800">Donor Registration</h2>
                    <p class="text-gray-600">Tell us about yourself to start sharing food</p>
                </div>
                
                <form id="donorForm" class="space-y-6">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Full Name *</label>
                            <input type="text" id="donorName" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Phone Number *</label>
                            <input type="tel" id="donorPhone" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email Address *</label>
                        <input type="email" id="donorEmail" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Full Address *</label>
                        <textarea id="donorAddress" required rows="3" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">City *</label>
                        <input type="text" id="donorCity" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                    </div>
                    
                    <button type="submit" class="w-full btn-primary text-white py-3 rounded-lg font-semibold">
                        <i class="fas fa-arrow-right mr-2"></i>Continue to Add Food Items
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Food Items -->
    <div id="addFoodItems" class="hidden min-h-screen py-12">
        <div class="container mx-auto px-4">
            <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-8 fade-in">
                <div class="text-center mb-8">
                    <i class="fas fa-plus-circle text-4xl text-orange-500 mb-4"></i>
                    <h2 class="text-3xl font-bold text-gray-800">Add Food Items</h2>
                    <p class="text-gray-600">Share your delicious homemade food with others</p>
                </div>
                
                <form id="foodForm" class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Food Name *</label>
                        <select id="foodName" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                            <option value="">Select a dish</option>
                            <option value="Biryani">Biryani</option>
                            <option value="Dal Tadka">Dal Tadka</option>
                            <option value="Butter Chicken">Butter Chicken</option>
                            <option value="Roti/Chapati">Roti/Chapati</option>
                            <option value="Rice">Rice</option>
                            <option value="Samosa">Samosa</option>
                            <option value="Chole Bhature">Chole Bhature</option>
                            <option value="Rajma">Rajma</option>
                            <option value="Palak Paneer">Palak Paneer</option>
                            <option value="Aloo Sabzi">Aloo Sabzi</option>
                            <option value="Other">Other (specify below)</option>
                        </select>
                    </div>
                    
                    <div id="otherFoodDiv" class="hidden">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Specify Food Name *</label>
                        <input type="text" id="otherFoodName" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Quantity *</label>
                            <input type="text" id="foodQuantity" required placeholder="e.g., Serves 4 people" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        </div>
                        
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Ingredients *</label>
                        <textarea id="foodIngredients" required rows="3" placeholder="List main ingredients used..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Food Description</label>
                        <textarea id="foodDescription" rows="2" placeholder="Describe your dish..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"></textarea>
                    </div>
                    
                    <button type="submit" class="w-full btn-primary text-white py-3 rounded-lg font-semibold">
                        <i class="fas fa-upload mr-2"></i>Post Food Item
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Buyer Registration -->
    <div id="buyerRegister" class="hidden min-h-screen py-12">
        <div class="container mx-auto px-4">
            <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-8 fade-in">
                <div class="text-center mb-8">
                    <i class="fas fa-user text-4xl text-green-600 mb-4"></i>
                    <h2 class="text-3xl font-bold text-gray-800">Buyer Registration</h2>
                    <p class="text-gray-600">Join our community to find delicious homemade food</p>
                </div>
                
                <form id="buyerForm" class="space-y-6">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Full Name *</label>
                            <input type="text" id="buyerName" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Phone Number *</label>
                            <input type="tel" id="buyerPhone" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email Address *</label>
                        <input type="email" id="buyerEmail" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Full Address *</label>
                        <textarea id="buyerAddress" required rows="3" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">City *</label>
                        <input type="text" id="buyerCity" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                    </div>
                    
                    <button type="submit" class="w-full btn-secondary text-white py-3 rounded-lg font-semibold">
                        <i class="fas fa-arrow-right mr-2"></i>Continue to Browse Food
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Browse Food -->
    <div id="browseFood" class="hidden min-h-screen py-12">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <i class="fas fa-search text-4xl text-green-600 mb-4"></i>
                <h2 class="text-3xl font-bold text-gray-800">Available Food Items</h2>
                <p class="text-gray-600">Fresh homemade meals available near you</p>
            </div>
            
            <div id="foodGrid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Food items will be populated here -->
            </div>
            
            <div id="noFoodMessage" class="text-center py-12 hidden">
                <i class="fas fa-utensils text-6xl text-gray-300 mb-4"></i>
                <h3 class="text-2xl font-semibold text-gray-600 mb-2">No Food Available</h3>
                <p class="text-gray-500">Be the first to share some delicious homemade food!</p>
                <button id="becomeSharer" class="mt-4 btn-primary text-white px-6 py-3 rounded-lg font-semibold">
                    <i class="fas fa-plus mr-2"></i>Share Food
                </button>
            </div>
        </div>
    </div>

    <!-- Place Order -->
    <div id="placeOrder" class="hidden min-h-screen py-12">
        <div class="container mx-auto px-4">
            <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-8 fade-in">
                <div class="text-center mb-8">
                    <i class="fas fa-shopping-cart text-4xl text-green-600 mb-4"></i>
                    <h2 class="text-3xl font-bold text-gray-800">Place Your Order</h2>
                    <p class="text-gray-600">Confirm your order details</p>
                </div>
                
                <div id="orderDetails" class="mb-8">
                    <!-- Order details will be populated here -->
                </div>
                
                <form id="orderForm" class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Quantity Needed *</label>
                        <select id="orderQuantity" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                            <option value="">Select quantity</option>
                            <option value="1">1 serving</option>
                            <option value="2">2 servings</option>
                            <option value="3">3 servings</option>
                            <option value="4">4 servings</option>
                            <option value="5">5 servings</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Special Instructions</label>
                        <textarea id="orderInstructions" rows="3" placeholder="Any special requests or notes..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Preferred Pickup Time *</label>
                        <input type="datetime-local" id="pickupTime" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                    </div>
                    
                    <button type="submit" class="w-full btn-secondary text-white py-3 rounded-lg font-semibold">
                        <i class="fas fa-check mr-2"></i>Confirm Order
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Order Confirmation -->
    <div id="orderConfirmation" class="hidden min-h-screen py-12">
        <div class="container mx-auto px-4">
            <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-8 text-center fade-in">
                <div class="mb-8">
                    <i class="fas fa-check-circle text-6xl text-green-500 mb-4"></i>
                    <h2 class="text-3xl font-bold text-gray-800 mb-4">Order Confirmed!</h2>
                    <p class="text-gray-600">Your order has been successfully placed and the donor has been notified.</p>
                </div>
                
                <div id="confirmationDetails" class="bg-gray-50 p-6 rounded-lg mb-8 text-left">
                    <!-- Order confirmation details will be populated here -->
                </div>
                
                <div class="space-y-4">
                    <button id="backToBrowse" class="w-full btn-secondary text-white py-3 rounded-lg font-semibold">
                        <i class="fas fa-arrow-left mr-2"></i>Browse More Food
                    </button>
                    <button id="backHome" class="w-full bg-gray-500 hover:bg-gray-600 text-white py-3 rounded-lg font-semibold transition-colors">
                        <i class="fas fa-home mr-2"></i>Back to Home
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Donor Dashboard -->
    <div id="donorDashboard" class="hidden min-h-screen py-12">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <i class="fas fa-tachometer-alt text-4xl text-orange-500 mb-4"></i>
                <h2 class="text-3xl font-bold text-gray-800">Donor Dashboard</h2>
                <p class="text-gray-600">Manage your food items and orders</p>
            </div>
            
            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Your Food Items -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h3 class="text-xl font-semibold mb-4 flex items-center">
                        <i class="fas fa-utensils mr-2 text-orange-500"></i>
                        Your Food Items
                    </h3>
                    <div id="donorFoodItems">
                        <!-- Donor's food items will be populated here -->
                    </div>
                    <button id="addMoreFood" class="mt-4 btn-primary text-white px-4 py-2 rounded-lg font-semibold">
                        <i class="fas fa-plus mr-2"></i>Add More Food
                    </button>
                </div>
                
                <!-- Received Orders -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h3 class="text-xl font-semibold mb-4 flex items-center">
                        <i class="fas fa-shopping-bag mr-2 text-green-500"></i>
                        Received Orders
                    </h3>
                    <div id="receivedOrders">
                        <!-- Received orders will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Thank You Page -->
    <div id="thankYou" class="hidden min-h-screen py-12">
        <div class="container mx-auto px-4">
            <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-8 text-center fade-in">
                <div class="mb-8">
                    <i class="fas fa-heart text-6xl text-red-500 mb-4 animate-pulse"></i>
                    <h2 class="text-4xl font-bold text-gray-800 mb-4">Thank You!</h2>
                    <p class="text-xl text-gray-600 mb-6">Your contribution to the community is making a difference.</p>
                    <p class="text-gray-500">Together, we're reducing food waste and helping those in need. Every meal shared is a step towards a better community.</p>
                </div>
                
                <div class="bg-gradient-to-r from-orange-100 to-green-100 p-6 rounded-lg mb-8">
                    <h3 class="text-lg font-semibold text-gray-800 mb-2">What's Next?</h3>
                    <p class="text-gray-600">You'll receive notifications when someone orders your food or when new food items become available.</p>
                </div>
                
                <div class="space-y-4">
                    <button id="returnHome" class="w-full btn-primary text-white py-3 rounded-lg font-semibold">
                        <i class="fas fa-home mr-2"></i>Return to Home
                    </button>
                    <button id="viewDashboard" class="w-full btn-secondary text-white py-3 rounded-lg font-semibold">
                        <i class="fas fa-tachometer-alt mr-2"></i>View Dashboard
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="notification" class="notification hidden bg-green-500 text-white px-6 py-4 rounded-lg shadow-lg">
        <div class="flex items-center">
            <i class="fas fa-check-circle mr-3"></i>
            <span id="notificationText"></span>
        </div>
    </div>

    <script>
        // Application State
        let currentUser = null;
        let userType = null;
        let foodItems = [];
        let orders = [];
        let currentFoodItem = null;

        // Initialize localStorage data
        function initializeData() {
            const savedFoodItems = localStorage.getItem('foodItems');
            const savedOrders = localStorage.getItem('orders');
            
            if (savedFoodItems) {
                foodItems = JSON.parse(savedFoodItems);
            }
            
            if (savedOrders) {
                orders = JSON.parse(savedOrders);
            }
        }

        // Save data to localStorage
        function saveData() {
            localStorage.setItem('foodItems', JSON.stringify(foodItems));
            localStorage.setItem('orders', JSON.stringify(orders));
        }

        // Show notification
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            
            notificationText.textContent = message;
            notification.className = `notification ${type === 'success' ? 'bg-green-500' : 'bg-red-500'} text-white px-6 py-4 rounded-lg shadow-lg`;
            notification.classList.remove('hidden');
            
            setTimeout(() => {
                notification.classList.add('hidden');
            }, 5000);
        }

        // Show/Hide sections
        function showSection(sectionId) {
            const sections = ['homepage', 'donorRegister', 'addFoodItems', 'buyerRegister', 'browseFood', 'placeOrder', 'orderConfirmation', 'donorDashboard', 'thankYou'];
            
            sections.forEach(section => {
                document.getElementById(section).classList.add('hidden');
            });
            
            document.getElementById(sectionId).classList.remove('hidden');
            document.getElementById(sectionId).classList.add('fade-in');
        }

        // Get food image placeholder
        function getFoodImage(foodName) {
            const images = {
                'Biryani': 'https://images.unsplash.com/photo-1578500264472-45c0b32ec55a?auto=format&fit=crop&w=400&h=300&q=80',
                'Dal Tadka': 'https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=400&h=300&fit=crop',
                'Butter Chicken': 'https://images.unsplash.com/photo-1588166524941-3bf61a9c41db?w=400&h=300&fit=crop',
                'Roti/Chapati': 'https://images.unsplash.com/photo-1574653339244-2b9700dc7b53?w=400&h=300&fit=crop',
                'Rice': 'https://images.unsplash.com/photo-1586201375761-83865001e31c?w=400&h=300&fit=crop',
                'Samosa': 'https://images.unsplash.com/photo-1601050690597-df0568f70950?w=400&h=300&fit=crop',
                'Chole Bhature': 'https://images.unsplash.com/photo-1626132647523-66f9bf380027?w=400&h=300&fit=crop',
                'Rajma': 'https://images.unsplash.com/photo-1565557623262-b51c2513a641?w=400&h=300&fit=crop',
                'Palak Paneer': 'https://images.unsplash.com/photo-1631452180539-96aca7d48617?w=400&h=300&fit=crop',
                'Aloo Sabzi': 'https://images.unsplash.com/photo-1506280754576-f6fa8a873550?w=400&h=300&fit=crop'
            };
            
            return images[foodName] || 'https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=400&h=300&fit=crop';
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            initializeData();
            
            // Navigation
            document.getElementById('homeBtn').addEventListener('click', () => {
                showSection('homepage');
                currentUser = null;
                userType = null;
            });

            document.getElementById('shareBtn').addEventListener('click', () => {
                userType = 'donor';
                showSection('donorRegister');
            });

            document.getElementById('buyBtn').addEventListener('click', () => {
                userType = 'buyer';
                showSection('buyerRegister');
            });

            // Food name selection
            document.getElementById('foodName').addEventListener('change', function() {
                const otherDiv = document.getElementById('otherFoodDiv');
                if (this.value === 'Other') {
                    otherDiv.classList.remove('hidden');
                    document.getElementById('otherFoodName').required = true;
                } else {
                    otherDiv.classList.add('hidden');
                    document.getElementById('otherFoodName').required = false;
                }
            });

            // Donor registration form
            document.getElementById('donorForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                currentUser = {
                    name: document.getElementById('donorName').value,
                    phone: document.getElementById('donorPhone').value,
                    email: document.getElementById('donorEmail').value,
                    address: document.getElementById('donorAddress').value,
                    city: document.getElementById('donorCity').value,
                    type: 'donor'
                };
                
                showSection('addFoodItems');
                showNotification('Registration successful! Now add your food items.');
            });

            // Add food form
            document.getElementById('foodForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const foodNameSelect = document.getElementById('foodName').value;
                const otherFoodName = document.getElementById('otherFoodName').value;
                const finalFoodName = foodNameSelect === 'Other' ? otherFoodName : foodNameSelect;
                
                const foodItem = {
                    id: Date.now(),
                    name: finalFoodName,
                    quantity: document.getElementById('foodQuantity').value,
                    
                    ingredients: document.getElementById('foodIngredients').value,
                    description: document.getElementById('foodDescription').value,
                    donor: currentUser,
                    image: getFoodImage(finalFoodName),
                    datePosted: new Date().toISOString(),
                    available: true
                };
                
                foodItems.push(foodItem);
                saveData();
                
                showSection('donorDashboard');
                loadDonorDashboard();
                showNotification('Food item posted successfully!');
            });

            // Buyer registration form
            document.getElementById('buyerForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                currentUser = {
                    name: document.getElementById('buyerName').value,
                    phone: document.getElementById('buyerPhone').value,
                    email: document.getElementById('buyerEmail').value,
                    address: document.getElementById('buyerAddress').value,
                    city: document.getElementById('buyerCity').value,
                    type: 'buyer'
                };
                
                showSection('browseFood');
                loadFoodItems();
                showNotification('Registration successful! Browse available food items.');
            });

            // Order form
            document.getElementById('orderForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const order = {
                    id: Date.now(),
                    foodItem: currentFoodItem,
                    buyer: currentUser,
                    quantity: document.getElementById('orderQuantity').value,
                    instructions: document.getElementById('orderInstructions').value,
                    pickupTime: document.getElementById('pickupTime').value,
                    status: 'pending',
                    dateOrdered: new Date().toISOString()
                };
                
                orders.push(order);
                saveData();
                
                showOrderConfirmation(order);
                showNotification('Order placed successfully! The donor has been notified.');
            });

            // Navigation buttons
            document.getElementById('backToBrowse').addEventListener('click', () => {
                showSection('browseFood');
                loadFoodItems();
            });

            document.getElementById('backHome').addEventListener('click', () => {
                showSection('homepage');
            });

            document.getElementById('returnHome').addEventListener('click', () => {
                showSection('homepage');
            });

            document.getElementById('viewDashboard').addEventListener('click', () => {
                if (userType === 'donor') {
                    showSection('donorDashboard');
                    loadDonorDashboard();
                } else {
                    showSection('browseFood');
                    loadFoodItems();
                }
            });

            document.getElementById('becomeSharer').addEventListener('click', () => {
                userType = 'donor';
                showSection('donorRegister');
            });

            document.getElementById('addMoreFood').addEventListener('click', () => {
                showSection('addFoodItems');
            });
        });

        // Load food items for browsing
        function loadFoodItems() {
            const foodGrid = document.getElementById('foodGrid');
            const noFoodMessage = document.getElementById('noFoodMessage');
            
            const availableFood = foodItems.filter(item => item.available);
            
            if (availableFood.length === 0) {
                foodGrid.innerHTML = '';
                noFoodMessage.classList.remove('hidden');
                return;
            }
            
            noFoodMessage.classList.add('hidden');
            
            foodGrid.innerHTML = availableFood.map(item => `
                <div class="food-card bg-white rounded-lg shadow-lg overflow-hidden">
                    <img src="${item.image}" alt="${item.name}" class="food-image">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-2">${item.name}</h3>
                        <p class="text-gray-600 mb-2"><i class="fas fa-utensils mr-2"></i>${item.quantity}</p>
                        <p class="text-sm text-gray-500 mb-4"><strong>Ingredients:</strong> ${item.ingredients}</p>
                        <div class="flex items-center justify-between mb-4">
                            <div class="text-sm text-gray-500">
                                <i class="fas fa-map-marker-alt mr-1"></i>
                                ${item.donor.city}
                            </div>
                            <div class="text-sm text-gray-500">
                                <i class="fas fa-clock mr-1"></i>
                                ${new Date(item.datePosted).toLocaleDateString()}
                            </div>
                        </div>
                        <button onclick="selectFoodItem(${item.id})" class="w-full btn-secondary text-white py-2 rounded-lg font-semibold">
                            <i class="fas fa-shopping-cart mr-2"></i>Order Now
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Select food item for ordering
        function selectFoodItem(itemId) {
            currentFoodItem = foodItems.find(item => item.id === itemId);
            showOrderForm();
        }

        // Show order form
        function showOrderForm() {
            showSection('placeOrder');
            
            const orderDetails = document.getElementById('orderDetails');
            orderDetails.innerHTML = `
                <div class="bg-gray-50 p-6 rounded-lg">
                    <div class="flex items-start space-x-4">
                        <img src="${currentFoodItem.image}" alt="${currentFoodItem.name}" class="w-24 h-24 object-cover rounded-lg">
                        <div class="flex-1">
                            <h3 class="text-xl font-semibold mb-2">${currentFoodItem.name}</h3>
                            <p class="text-gray-600 mb-1"><i class="fas fa-utensils mr-2"></i>${currentFoodItem.quantity}</p>
                            <p class="text-sm text-gray-500"><strong>By:</strong> ${currentFoodItem.donor.name}</p>
                            <p class="text-sm text-gray-500"><i class="fas fa-map-marker-alt mr-1"></i>${currentFoodItem.donor.address}, ${currentFoodItem.donor.city}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        // Show order confirmation
        function showOrderConfirmation(order) {
            showSection('orderConfirmation');
            
            const confirmationDetails = document.getElementById('confirmationDetails');
            confirmationDetails.innerHTML = `
                <h3 class="font-semibold mb-4">Order Details:</h3>
                <div class="space-y-2">
                    <p><strong>Food Item:</strong> ${order.foodItem.name}</p>
                    <p><strong>Quantity:</strong> ${order.quantity} serving(s)</p>
                    <p><strong>Pickup Time:</strong> ${new Date(order.pickupTime).toLocaleString()}</p>
                    ${order.instructions ? `<p><strong>Instructions:</strong> ${order.instructions}</p>` : ''}
                </div>
                
                <div class="mt-6 pt-6 border-t border-gray-200">
                    <h4 class="font-semibold mb-2">Donor Contact:</h4>
                    <div class="space-y-1">
                        <p><strong>Name:</strong> ${order.foodItem.donor.name}</p>
                        <p><strong>Phone:</strong> ${order.foodItem.donor.phone}</p>
                        <p><strong>Address:</strong> ${order.foodItem.donor.address}, ${order.foodItem.donor.city}</p>
                    </div>
                </div>
            `;
        }

        // Load donor dashboard
        function loadDonorDashboard() {
            const donorFoodItems = document.getElementById('donorFoodItems');
            const receivedOrders = document.getElementById('receivedOrders');
            
            // Load donor's food items
            const myFoodItems = foodItems.filter(item => item.donor.email === currentUser.email);
            
            if (myFoodItems.length === 0) {
                donorFoodItems.innerHTML = '<p class="text-gray-500">No food items posted yet.</p>';
            } else {
                donorFoodItems.innerHTML = myFoodItems.map(item => `
                    <div class="border border-gray-200 rounded-lg p-4 mb-4">
                        <div class="flex items-start space-x-4">
                            <img src="${item.image}" alt="${item.name}" class="w-16 h-16 object-cover rounded-lg">
                            <div class="flex-1">
                                <h4 class="font-semibold">${item.name}</h4>
                                <p class="text-sm text-gray-600">${item.quantity}
                                <p class="text-xs text-gray-500">${new Date(item.datePosted).toLocaleDateString()}</p>
                                <span class="inline-block px-2 py-1 text-xs rounded-full ${item.available ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                                    ${item.available ? 'Available' : 'Sold Out'}
                                </span>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
            
            // Load received orders
            const myOrders = orders.filter(order => order.foodItem.donor.email === currentUser.email);
            
            if (myOrders.length === 0) {
                receivedOrders.innerHTML = '<p class="text-gray-500">No orders received yet.</p>';
            } else {
                receivedOrders.innerHTML = myOrders.map(order => `
                    <div class="border border-gray-200 rounded-lg p-4 mb-4">
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="font-semibold">${order.foodItem.name}</h4>
                            <span class="px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800">${order.status}</span>
                        </div>
                        <p class="text-sm text-gray-600">Quantity: ${order.quantity} serving(s)</p>
                        <p class="text-sm text-gray-600">Buyer: ${order.buyer.name}</p>
                        <p class="text-sm text-gray-600">Phone: ${order.buyer.phone}</p>
                        <p class="text-sm text-gray-600">Pickup: ${new Date(order.pickupTime).toLocaleString()}</p>
                        ${order.instructions ? `<p class="text-sm text-gray-600">Note: ${order.instructions}</p>` : ''}
                    </div>
                `).join('');
            }
            
            showSection('donorDashboard');
        }
    </script>
</body>
</html>
